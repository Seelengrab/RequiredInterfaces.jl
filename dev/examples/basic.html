<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Basic Example · RequiredInterfaces.jl</title><meta name="title" content="Basic Example · RequiredInterfaces.jl"/><meta property="og:title" content="Basic Example · RequiredInterfaces.jl"/><meta property="twitter:title" content="Basic Example · RequiredInterfaces.jl"/><meta name="description" content="Documentation for RequiredInterfaces.jl."/><meta property="og:description" content="Documentation for RequiredInterfaces.jl."/><meta property="twitter:description" content="Documentation for RequiredInterfaces.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../index.html">RequiredInterfaces.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Main Page</a></li><li><span class="tocitem">Examples</span><ul><li class="is-active"><a class="tocitem" href="basic.html">Basic Example</a></li><li><a class="tocitem" href="multifuncs.html">Interfaces with multiple functions</a></li><li><a class="tocitem" href="testing.html">Testing Required Interfaces</a></li></ul></li><li><a class="tocitem" href="../interfaces.html">About Interfaces</a></li><li><a class="tocitem" href="../api.html">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href="basic.html">Basic Example</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="basic.html">Basic Example</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Seelengrab/RequiredInterfaces.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Seelengrab/RequiredInterfaces.jl/blob/main/docs/src/examples/basic.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Basic-Example"><a class="docs-heading-anchor" href="#Basic-Example">Basic Example</a><a id="Basic-Example-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-Example" title="Permalink"></a></h1><p>Say we have a package that provides an interface for other packages to hook into:</p><pre><code class="language-julia hljs">module A

export MyInterface, myfunc

&quot;&quot;&quot;
    MyInterface

I&#39;m an abstract type, which means I have some required dispatches
that subtypes need to implement.

The interface to implement is:

 * myfunc(::MyInterface)
&quot;&quot;&quot;
abstract type MyInterface end

&quot;&quot;&quot;
    myfunc(::MyInterface)

I&#39;m the sole interface function for `MyInterface`. Types that subtype
`MyInterface` must implement me on that subtype to conform to `MyInterface`.
&quot;&quot;&quot;
function myfunc end
end</code></pre><p>A priori, a potential implementor only has a docstring to go on, to be able to decide whether they&#39;ve correctly implemented everything an interface requires to be implemented. Additionally, they can&#39;t easily write regression tests to ensure that they don&#39;t accidentally remove a required definition, or keep up with new additions to an interface in a breaking release of the interface they&#39;re depending on. This means keeping up with interface definitions is a quite tedious chore, even though all information ought to be available to (at least partially) automate this. What&#39;s worse, with just the bare <code>function myfunc end</code> definition above, it&#39;s impossible to tell &quot;this is unsupported&quot; apart from &quot;this is intended to be implemented&quot;.</p><p>This is where RequiredInterfaces.jl comes in. If the above module makes use of <a href="../api.html#RequiredInterfaces.@required-Tuple{Symbol, Expr}"><code>@required</code></a> to mark its interface requirementsi in terms of required dispatches, downstream packages that want to implement the interface can preemptively check if they&#39;ve even defined the correct methods (and not have their implementation work by accident in an unsupported manner, e.g. by comitting type piracy or implementing an entirely different set of methods that just happen to work).</p><p>The change <code>A</code> has to make is simple:</p><pre><code class="language-julia hljs">module A

using RequiredInterfaces

export MyInterface, myfunc

&quot;&quot;&quot;
...omitted for brevity
&quot;&quot;&quot;
abstract type MyInterface end

&quot;&quot;&quot;
...omitted for brevity
&quot;&quot;&quot;
function myfunc end

@required MyInterface myfunc(::MyInterface)

end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Main.A</code></pre><p>That is, one additional <code>using</code>, as well as an invocation of <code>@required</code> with the abstract interface type as well as the function and its signature that&#39;s part of the interface <code>MyInterface</code>.</p><p>With this small change, all issues mentioned above are solvable. First, the ambiguity between &quot;should be implemented&quot; and &quot;not supported&quot; is solved:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using .A</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; struct Foo &lt;: A.MyInterface end</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; A.myfunc(Foo())</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: <span class="sgr31">NotImplementedError: </span>The called method is part of a fallback definition for the `Main.A.MyInterface` interface.
Please implement `myfunc(::MyInterface)` for your type `T &lt;: Main.A.MyInterface`.</code></pre><p>This is because <a href="../api.html#RequiredInterfaces.@required-Tuple{Symbol, Expr}"><code>@required</code></a> defines a fallback method that dispatches to <a href="../api.html#RequiredInterfaces.NotImplementedError"><code>NotImplementedError</code></a>, allowing users that encounter this error to notify the package maintainter that they have missed to implement a required method. Further, because this is an actually thrown error, it&#39;s also discoverable through JET.jl, even without explicit interface testing by implementors.</p><p>In the next section, we&#39;ll take a look at how package authors that would like to hook into an interface can test that they have successfully done so, at least in terms of defining the correct methods.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../index.html">« Main Page</a><a class="docs-footer-nextpage" href="multifuncs.html">Interfaces with multiple functions »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Thursday 4 April 2024 14:37">Thursday 4 April 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
